<!--
============================================
DASHBOARD.HTML - Space Explorer Main Interface
============================================
Structure: Two-panel layout
- Left: AI chat with voice controls
- Right: Space information widgets
============================================
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
</head>

<body>
    <!-- ==========================================
         MAIN DASHBOARD CONTAINER
         ========================================== -->
    <div class="dashboard-container">

        <!-- ==========================================
             LEFT PANEL - AI CHAT INTERFACE
             ========================================== -->
        <div class="left-panel">

            <!-- Chat Header -->
            <div class="chat-header">
                <h2>ü§ñ Isaac's Space Assistant</h2>
            </div>

            <!-- ==========================================
                 VOICE CONTROLS SECTION
                 Buttons managed by chat.js
                 ========================================== -->
            <div class="voice-controls">

                <!-- Primary voice button (starts/stops recording) -->
                <button id="voice-button" onclick="toggleVoiceRecording()" data-default-text="üé§ Tap to Talk"
                    data-recording-text="üé§ Tap to Stop">
                    üé§ Tap to Talk
                </button>

                <!-- Stop speaking button (hidden by default) -->
                <button id="stop-speaking-button" onclick="stopSpeaking()" class="stop-button" style="display: none;">
                    üîá Stop Speaking
                </button>

                <!-- Test audio button (for debugging audio issues) -->
                <button id="test-audio-button" onclick="playTestBeep()" class="stop-button">
                    üîä Test Audio
                </button>

                <!-- Voice status message (updated by chat.js) -->
                <div id="voice-status" class="voice-status">
                    Ready to listen! Tap the microphone and speak.
                </div>
            </div>

            <!-- ==========================================
                 CHAT MESSAGES CONTAINER
                 Messages added dynamically by chat.js
                 ========================================== -->
            <div id="chat-container" class="chat-container">
                <div id="chat-messages">
                    <!-- Initial AI greeting -->
                    <div class="message ai-message">
                        <strong>Space AI:</strong>
                    </div>
                </div>
            </div>

            <!-- ==========================================
                 TEXT INPUT AREA
                 Manual question entry
                 ========================================== -->
            <div class="input-area">
                <!-- Question text input (handles Enter key via chat.js) -->
                <input type="text" id="question-input" placeholder="Ask about space... or use voice!"
                    onkeypress="handleKeyPress(event)">

                <!-- Submit button -->
                <button onclick="askQuestion()" id="ask-button" class="ask-button">
                    Ask
                </button>
            </div>

        </div>
        <!-- END LEFT PANEL -->

        <!-- ==========================================
             RIGHT PANEL - SPACE INFORMATION WIDGETS
             ========================================== -->
        <div class="right-panel">

            <!-- ==========================================
                 WIDGET 1: CURRENT TIME DISPLAY
                 Updated every second by dashboard.js
                 ========================================== -->
            <div class="space-widget time-widget">
                <h3>Mission Control Time</h3>
                <!-- Time display (format: HH:MM:SS AM/PM) -->
                <div id="current-time"></div>
                <!-- Date display (format: Weekday, Month Day, Year) -->
                <div id="current-date"></div>
            </div>

            <!-- ==========================================
                 WIDGET 2: ISS POSITION TRACKER
                 Fetches data from /api/iss-position
                 ========================================== -->
            <div class="space-widget iss-widget">
                <h3>üõ∞Ô∏è ISS Status</h3>

                <!-- Track ISS button (triggers dashboard.js trackISS()) -->
                <button onclick="trackISS()" id="track-iss-button" data-default-text="Track ISS"
                    data-loading-text="Tracking...">
                    Track ISS
                </button>

                <!-- Loading indicator (shown during API call) -->
                <div id="iss-loading" class="widget-loading" style="display: none;">
                    <p>üîÑ Getting ISS position...</p>
                </div>

                <!-- ISS data display (populated by dashboard.js) -->
                <div id="iss-info">
                    <p>Click "Track ISS" to get current position</p>
                </div>
            </div>

            <!-- ==========================================
                 WIDGET 3: SPACE IMAGES (PLACEHOLDER)
                 Future: NASA API integration
                 ========================================== -->
            <div class="space-widget images-search-widget">
                <h3>Space Pictures</h3>
                <div id="images-search-widget">
                    <p></p>
                </div>
            </div>

        </div>
        <!-- END RIGHT PANEL -->

    </div>
    <!-- END DASHBOARD CONTAINER -->

    <!-- ==========================================
         JAVASCRIPT FILES
         Load order matters:
         1. DOM utilities (element access)
         2. Chat logic (uses DOM utilities)
         3. Dashboard widgets (uses DOM utilities)
         ========================================== -->
    <script src="/static/js/dom-utils.js"></script>
    <script src="/static/js/chat.js"></script>
    <script src="/static/js/dashboard.js"></script>
</body>

</html>